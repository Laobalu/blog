# 什么是执行上下文  
执行上下文就是当前 JavaScript 代码被解析和执行时所在环境的抽象概念， JavaScript 中运行任何的代码都是在执行上下文中运行，包含了当前调用的所有信息。简言之 **执行上下文就是 JavaScript 执行一段代码块时的运行环境** 。 

## 执行上下文类型 
根据代码不同的运行场景，执行上下文有不同类型。  
- 全局执行上下文：默认上下文，当代码运行时，JavaScript 引擎首先创建一个全局执行上下文来执行全局代码。他会做两件事，创建一个全局对象window（浏览器），并且设置this指向window。
- 函数执行上下文 - 每个函数被调用，都会创建自己的上下文，来执行该函数代码。
- eval执行上下文 - eval也有自己的上下文。（尽量不使用）



## 执行栈
一段常见的JavaScript代码会有全局代码和多个函数，对应的就会有一个全局执行上下文和多个函数执行上下文，那么js引擎又是如何管理这些执行上下文的呢？  

    执行栈，它是一种用来管理执行上下文的数据结构，遵循 LIFO（后进先出） 原则。
步骤：  
1. js引擎首次读取脚本时，它会编译代码，创建全局上下文，并压入栈底。
2. 每当有一个函数调用，引擎会编译代码，为该函数创建一个新的执行上下文，并压入栈顶。
3. 引擎会执行栈顶上下文中的可执行代码，当执行结束后，该执行上下文从栈中弹出，js引擎控制流程到下一个执行上下文，直到全局代码被执行完。
```js
const a = 100
function fun(b) {
  return a * b
}
const c = fun(2)
```
![执行上下文_01](../images/执行上下文_01.png)

# 执行上下文如何创建

## 执行上下文何时产生

